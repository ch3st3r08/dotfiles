filetype off            "Helps force plug-ins to load correctly
syntax enable           "Enables syntax highlighting
set encoding=utf-8      "The encoding displayed
set fileencoding=utf-8      "The encoding written to file
filetype plugin indent on
set hidden          "Required to keep multiple buffers open
set nowrap          "Display long lines as just one line
set pumheight=10        "Makes opoup menu smaller
set list        "Shows non-printable charaacters
set listchars=tab:\|\ ,trail:⋅,nbsp:⎵
set ruler           "Show the cursor position all the time
set cmdheight=2         "More space for displaying messages
set iskeyword+=-        "Treat dash separated words as a word text object
set mouse=a         "Enable your mouse
set splitbelow          "Horizontal splits will automatically be below
set splitright          "Vertical splits will automatically be to the right
set conceallevel=0      "So that I can ´´ in markdown files
set tabstop=4
set softtabstop=-1      "Insert 2 spaces for a tab
set shiftwidth=0        "Change the number of space chars inserted for indentation
set autoindent          "Good auto indent
set smarttab            "Makes tabbing smarter
set smartindent
set expandtab           "Converts tabs to spaces
set laststatus=0        "Always display the status line
set relativenumber          "Line numbers
set number
set nohlsearch
set cursorline          "Enable hightlightning of the cursor line
set showtabline=2       "Always show tabs
set noshowmode          "We don't need to see thigns like --INSERT --anymore
set nobackup            "Recommended by CoC
set noswapfile
set incsearch
set scrolloff=2
set nowritebackup       "Recommended by CoC
set updatetime=300      "Faster completion
set timeoutlen=500      "By default timeoutlen is 1000ms
set formatoptions-=cro      "Stop newline continution comments
set clipboard=unnamedplus   "Copy paste between vim and everything else
set completeopt=menu,menuone,noinsert,noselect
set signcolumn=yes
set termguicolors

let g:mapleader = "\<Space>"

"Check if Vimplug is installed
let data_dir = has('nvim') ? stdpath('data') . '/site' : '~/.vim'
if empty(glob(data_dir . '/autoload/plug.vim'))
     silent execute '!curl -fLo '.data_dir.'/autoload/plug.vim --create-dirs  https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim'
       autocmd VimEnter * PlugInstall --sync | source $MYVIMRC
endif

call plug#begin(stdpath('data') . '/plugged')
"#####Colors Schemes
"Plug 'kaicataldo/material.vim', { 'branch': 'main' }
Plug 'marko-cerovac/material.nvim'
Plug 'gruvbox-community/gruvbox'
Plug 'folke/tokyonight.nvim', { 'branch': 'main' }
"Plug 'arcticicestudio/nord-vim'
"Plug 'sonph/onehalf', { 'rtp': 'vim' }
"Plug 'RRethy/nvim-base16'
"Plug 'rakr/vim-one'
Plug 'Th3Whit3Wolf/one-nvim'
Plug 'cocopon/iceberg.vim'
Plug 'hachy/eva01.vim'
Plug 'cseelus/vim-colors-tone'
Plug 'Matsuuu/pinkmare'
Plug 'raphamorim/lucario'
Plug 'dracula/vim', {'as':'dracula'}
Plug 'sainnhe/edge'
Plug 'shaunsingh/nord.nvim', {'as':'nord2'}

"#####Utils
Plug 'windwp/nvim-autopairs'
"Plug 'jiangmiao/auto-pairs'
Plug 'alvan/vim-closetag'
Plug 'moll/vim-bbye'
Plug 'ap/vim-css-color'
Plug 'mhinz/vim-startify'
Plug 'liuchengxu/vim-which-key'
Plug 'tpope/vim-surround'
Plug 'iamcco/markdown-preview.nvim', { 'do': 'cd app && npm install'  }
Plug 'junegunn/goyo.vim'
Plug 'sotte/presenting.vim'

"#####Icons
"Plug 'ryanoasis/vim-devicons'
Plug 'kyazdani42/nvim-web-devicons'

"#####Syntax, Autocompletion and Snippets
"Plug 'neoclide/coc.nvim', {'branch': 'release'}
Plug 'neovim/nvim-lspconfig'
Plug 'hrsh7th/nvim-cmp'
Plug 'hrsh7th/cmp-nvim-lsp'
Plug 'hrsh7th/cmp-buffer'
Plug 'hrsh7th/cmp-path'
Plug 'hrsh7th/cmp-cmdline'
Plug 'L3MON4D3/LuaSnip'
Plug 'saadparwaiz1/cmp_luasnip'
Plug 'rafamadriz/friendly-snippets'
Plug 'williamboman/nvim-lsp-installer'

" #####Treesitter
Plug 'nvim-treesitter/nvim-treesitter', {'do': ':TSUpdate'}

" #####Fuzzy finder
Plug 'nvim-lua/plenary.nvim'
Plug 'nvim-telescope/telescope.nvim'

"#####StatusLine
Plug 'nvim-lualine/lualine.nvim'
"Plug 'vim-airline/vim-airline'
"Plug 'vim-airline/vim-airline-themes'

"#####File Browser"
"Plug 'preservim/nerdtree'
"Plug 'tiagofumo/vim-nerdtree-syntax-highlight'

"#####File Browser Lua
Plug 'kyazdani42/nvim-tree.lua'

"#####Terminal utilities
Plug 'kassio/neoterm'
call plug#end()


"lua vim.lsp.set_log_level("debug")

" Calling plugins configs
lua require('chester.lsp')

" Required options before calling nvim-tree setup
highlight NvimTreeFolderIcon guibg=blue
let g:nvim_tree_quit_on_open = 0 "0 by default, closes the tree when you open a file
let g:nvim_tree_indent_markers = 1 "0 by default, this option shows indent markers when folders are open
let g:nvim_tree_git_hl = 1 "0 by default, will enable file highlight for git attributes (can be used without the icons).
let g:nvim_tree_highlight_opened_files = 1 "0 by default, will enable folder and file icon highlight for opened files/directories.
let g:nvim_tree_root_folder_modifier = ':~' "This is the default. See :help filename-modifiers for more options
let g:nvim_tree_add_trailing = 1 "0 by default, append a trailing slash to folder names
let g:nvim_tree_group_empty = 1 " 0 by default, compact folders that only contain a single folder into one node in the file tree
let g:nvim_tree_disable_window_picker = 1 "0 by default, will disable the window picker.
let g:nvim_tree_icon_padding = ' ' "one space by default, used for rendering the space between the icon and the filename. Use with caution, it could break rendering if you set an empty string depending on your font.
let g:nvim_tree_symlink_arrow = ' >> ' " defaults to ' ➛ '. used as a separator between symlinks' source and target.
let g:nvim_tree_respect_buf_cwd = 1 "0 by default, will change cwd of nvim-tree to that of new buffer's when opening nvim-tree.
let g:nvim_tree_create_in_closed_folder = 0 "1 by default, When creating files, sets the path of a file when cursor is on a closed folder to the parent folder when 0, and inside the folder when 1.
let g:nvim_tree_refresh_wait = 500 "1000 by default, control how often the tree can be refreshed, 1000 means the tree can be refresh once per 1000ms.
let g:nvim_tree_window_picker_exclude = {
    \   'filetype': [
    \     'notify',
    \     'packer',
    \     'qf'
    \   ],
    \   'buftype': [
    \     'terminal'
    \   ]
    \ }

lua require('chester.nvim-tree')
lua require('chester.lualine')
lua require('chester.nvim-autopairs')
lua require('chester.treesitter')

"darker lighter oceanic palenight deep ocean
let g:material_style = 'deep'

"storm, night and day.
let g:tokyonight_style = "storm"
colorscheme edge

"To keep terminal trnasparency
hi Normal guibg=NONE ctermbg=NONE
hi LineNr guibg=NONE ctermbg=NONE
hi SignColumn guibg=NONE ctermbg=NONE
hi EndOfBuffer guibg=NONE ctermbg=NONE

"Vim-closetag options
let g:closetag_filenames = '*.vue,*.html,*.xhtml,*.phtml'
let g:closetag_filetypes = 'vue,html,xhtml,phtml'

"Set format options when opening new files
autocmd BufNewFile,BufRead * setlocal formatoptions-=cro

" Mappings to make Neovim more friendly towards presenting slides
autocmd BufNewFile,BufRead *.vpm call SetVimPresentationMode()
function SetVimPresentationMode()
    nnoremap <buffer> <Right> :n<CR>
    nnoremap <buffer> <Left> :N<CR>

    if !exists('#goyo')
        Goyo
    endif
endfunction

function MakeTransparentBackground()
    hi Normal guibg=NONE ctermbg=NONE
    hi LineNr guibg=NONE ctermbg=NONE
    hi SignColumn guibg=NONE ctermbg=NONE
    hi EndOfBuffer guibg=NONE ctermbg=NONE
endfunction

"Startify options
let g:startify_lists = [
         \ { 'header': ['  Files'], 'type': 'files' },
         \ { 'header': ['  Current Directory '. getcwd()] },
         \ { 'header': ['  Bookmars'], 'type': 'bookmarks' },
         \]

let g:startify_bookmarks = [
         \ { 'b': '~/.bashrc' },
         \ { 'v': '~/.config/nvim/init.vim' },
         \]

let g:startify_fortune_use_unicode = 1

let g:presenting_figlets = 1

"Telescope options
nnoremap <leader>ff <cmd>lua require('telescope.builtin').find_files()<cr>
nnoremap <leader>fg <cmd>lua require('telescope.builtin').live_grep()<cr>
nnoremap <leader>fb <cmd>lua require('telescope.builtin').buffers()<cr>
nnoremap <leader>fh <cmd>lua require('telescope.builtin').help_tags()<cr>

""nvim-tree options
nnoremap <C-n> :NvimTreeToggle<CR>
nnoremap <leader>r :NvimTreeRefresh<CR>
nnoremap <leader>n :NvimTreeFindFile<CR>

"Mis remapeos 
"Guardar archivo
nnoremap <leader>w :w<CR>
inoremap <leader>w <ESC>:w<CR>
"Salir del modo terminal de neoVim
tnoremap <leader><Esc> <C-\><C-n>

"Abrir mi configuracion de NEOVIM
nnoremap <leader>ee :e $MYVIMRC<CR>

"Deshabilitar flechas de direccion
noremap <up> <nop>
noremap <down> <nop>
noremap <left> <nop>
noremap <right> <nop>


"Cambiar tamaño de ventanas usando flechas
nnoremap <silent> <right> :vertical resize +5<CR>
nnoremap <silent> <left> :vertical resize -5<CR>
nnoremap <silent> <up> :resize +5<CR>
nnoremap <silent> <down> :resize -5<CR>

"Moverse entre buffers
nnoremap <Tab> :bn<CR>
nnoremap <S-Tab> :bp<CR>

"Abrir terminal"
"vnoremap <c-t> :split<CR>:terminal<CR>:resize 8<CR>
"nnoremap <c-t> :split<CR>:terminal<CR>:resize 8<CR>

"Abrir terminal Neoterm
vnoremap <c-t> :8split<CR>:Topen<CR>:setl nobuflisted<CR>:redrawt<CR>
nnoremap <c-t> :8split<CR>:Topen<CR>:setl nobuflisted<CR>:redrawt<CR>

tnoremap <leader>x <C-\><C-n>:Tclose!<CR>
tnoremap <leader>q <C-\><C-n>:Tclose<CR>

"Cerrar buffers
nnoremap <leader>x :Bwipeout<CR>
vnoremap <leader>x :Bwipeout<CR>

"Vim vim-which-key maps
nnoremap <silent> <leader> :<c-u>WhichKey '<Space>'<CR>
